# Nuitka Configuration File cho VieNeu-TTS
# File này chứa cấu hình build Nuitka tối ưu cho VieNeu-TTS
# Sử dụng: python -m nuitka --config=nuitka.cfg main.py

[nuitka]
# General build options
standalone = true
onefile = false

# Output configuration
output-dir = dist_nuitka
output-filename = VieNeuTTS.exe

# Windows specific
windows-icon-from-ico = icon.ico
windows-console-mode = disable

# Plugin options
enable-plugin = tk-inter

# Follow imports - chỉ compile code cần thiết
follow-imports = true

# =============================================================================
# QUAN TRỌNG: Không bundle các thư viện nặng
# Các thư viện này sẽ được load từ:
# 1. Thư mục libs/ bên cạnh file exe
# 2. Hoặc từ Python environment của hệ thống
# =============================================================================

# Deep learning / ML libraries (KHÔNG BUNDLE)
nofollow-import-to = torch
nofollow-import-to = torchaudio
nofollow-import-to = torchvision

# Audio processing libraries (KHÔNG BUNDLE)
nofollow-import-to = neucodec
nofollow-import-to = librosa
nofollow-import-to = soundfile
nofollow-import-to = scipy
nofollow-import-to = pyaudio

# LLM inference (KHÔNG BUNDLE)
nofollow-import-to = llama_cpp

# NLP / Text processing (KHÔNG BUNDLE)
nofollow-import-to = phonemizer
nofollow-import-to = transformers
nofollow-import-to = huggingface_hub
nofollow-import-to = safetensors
nofollow-import-to = datasets
nofollow-import-to = tokenizers

# Numerical computing (KHÔNG BUNDLE - thường đi kèm torch)
nofollow-import-to = numpy

# ONNX (KHÔNG BUNDLE)
nofollow-import-to = onnxruntime

# Google APIs (KHÔNG BUNDLE)
nofollow-import-to = google
nofollow-import-to = google.genai

# Document processing (KHÔNG BUNDLE)
nofollow-import-to = docx

# Image processing (KHÔNG BUNDLE - nếu không cần)
nofollow-import-to = PIL

# =============================================================================
# BUNDLE các module cần thiết
# =============================================================================

# Edge TTS module (bundle)
include-package = edge

# Authentication module (bundle)
include-package = auth_module

# =============================================================================
# Include data files
# =============================================================================

# Edge TTS module data
include-data-dir = edge=edge

# Icon file
include-data-files = icon.ico=icon.ico

# Config file (optional - sẽ được bỏ qua nếu không tồn tại)
# Lưu ý: Đảm bảo config.yaml tồn tại trước khi build hoặc bỏ comment dòng dưới
# include-data-files = config.yaml=config.yaml

# =============================================================================
# Optimization options
# =============================================================================

# Assume yes for downloads (không hỏi khi tải dependencies)
assume-yes-for-downloads = true

# Remove assert statements (optional - bật để giảm size)
# remove-output = true

# Disable warnings (optional)
# nowarn-mnemonic = not-installed-module
